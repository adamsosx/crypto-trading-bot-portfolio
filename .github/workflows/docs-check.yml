name: Documentation Check

on:
  push:
    branches: [ main, master ]
    paths:
      - '*.md'
      - 'LICENSE'
  pull_request:
    branches: [ main, master ]
    paths:
      - '*.md'
      - 'LICENSE'

jobs:
  check:
    name: Check Documentation
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Check for broken links
      run: |
        echo "Checking for broken internal links..."
        grep -r "\.md" *.md | grep -o '\[.*\](\./[^)]*)' | sed 's/.*(\.\/\(.*\))/\1/' | while read file; do
          if [ ! -f "$file" ]; then
            echo "‚ùå Broken link: $file"
            exit 1
          fi
        done || echo "‚úÖ All internal links are valid"
        
    - name: Check LICENSE exists
      run: |
        if [ ! -f "LICENSE" ]; then
          echo "‚ùå LICENSE file is missing"
          exit 1
        else
          echo "‚úÖ LICENSE file exists"
        fi
        
    - name: Check README structure
      run: |
        if ! grep -q "## üìã Table of Contents" README.md; then
          echo "‚ùå README.md missing Table of Contents"
          exit 1
        fi
        echo "‚úÖ README.md structure is valid"
        
    - name: Summary
      run: |
        echo "‚úÖ Documentation check completed successfully"
